name: Ansible Lint on operation folder

on:
  pull_request:
    branches:
      - master
    paths:
      - 'operation/**'
  push:
    branches:
      - master
    paths:
    - 'operation/**'

defaults:
  run:
    working-directory: ./operation
jobs:
  ansible:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2

    - name: Lint Ansible Playbook
      uses: ansible/ansible-lint-action@master
      with:
        targets: ""
        args: "--exclude=.github --exclude=operation/manifests --exclude=operation/config"